{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/context","result":{"data":{"markdownRemark":{"id":"6fa7e0f2-4470-5a58-bf30-af58f42c48c9","html":"<blockquote>\n<p>정재남, &#x3C;코어 자바스크립트>, 위키북스</p>\n</blockquote>\n<p>이 글은 ‘코어 자바스크립트’ 책을 참고하여 요약한 것으로 크게 두 가지 개념을 담고 있다.</p>\n<ol>\n<li>호이스팅</li>\n<li>스코프</li>\n</ol>\n<hr>\n<h2 id=\"실행-컨텍스트\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8\" aria-label=\"실행 컨텍스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실행 컨텍스트</h2>\n<ul>\n<li><strong>실행할 코드에 필요한 환경 정보들을 모아놓은 객체</strong></li>\n<li>전역 컨텍스트<br>\n전역 공간에 대한 정보.<br>\n자동으로 생성</li>\n<li>eval 및 함수에 의한 컨텍스트<br>\n함수가 실행될 때 필요한 정보들을 수집</li>\n</ul>\n<p><del>이외에도 있는 것 같지만 책을 통해 알 수 있는 것은 여기까지였다.</del></p>\n<h3 id=\"실행-컨텍스트의-구성\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%9D%98-%EA%B5%AC%EC%84%B1\" aria-label=\"실행 컨텍스트의 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실행 컨텍스트의 구성</h3>\n<ul>\n<li>\n<p><strong>VariableEnvironment</strong><br>\n변경사항은 반영되지 않음<br>\n선언 시점의 LexicalEnvironment의 스냅샷이라고 생각하면 됨</p>\n<ul>\n<li>environmentRecord<br>\n현재 컨텍스트 내의 식별자들에 대한 정보</li>\n<li>outerEnvironmentReference<br>\n외부 환경 정보<br>\n바로 직전 컨텍스트 (= 상위 레벨 스코프)의 LexicalEnvironment를 참조</li>\n</ul>\n</li>\n<li>\n<p><strong>LexicalEnvironment</strong><br>\n변경사항 반영</p>\n<ul>\n<li>environmentRecord</li>\n<li>outerEnvironmentReference</li>\n</ul>\n</li>\n<li><strong>ThisBinding</strong><br>\nthis 식별자가 바라봐야 할 대상 객체</li>\n</ul>\n<br/>\n<p>처음에 현재 컨텍스트 내의 식별자들에 대한 정보 + 외부 환경 정보를 모아 <code class=\"language-text\">VariableEnvironment</code>를 생성한 후, 이를 그대로 복사하여 <code class=\"language-text\">LexicalEnvironment</code>를 만들고 이후에는 주로 <code class=\"language-text\">LexicalEnvironment</code>를 활용한다.</p>\n<p><code class=\"language-text\">VariableEnvironment</code>와 <code class=\"language-text\">LexicalEnvironment</code>는 다시 현재 컨텍스트 내의 식별자들에 대한 정보가 담긴 <code class=\"language-text\">environmentRecord</code>와 외부 환경 정보가 담긴 <code class=\"language-text\">outerEnvironmentReference</code>로 구성된다.</p>\n<h2 id=\"environmentrecord와-호이스팅\" style=\"position:relative;\"><a href=\"#environmentrecord%EC%99%80-%ED%98%B8%EC%9D%B4%EC%8A%A4%ED%8C%85\" aria-label=\"environmentrecord와 호이스팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>environmentRecord와 호이스팅</h2>\n<p><code class=\"language-text\">environmentRecord</code> 에는 현재 컨텍스트 내부의 식별자들에 대한 정보, 즉 매개변수명, 함수 내부에서 선언된 함수, 변수명 등이 저장된다.</p>\n<p>이런 정보는 함수가 호출이 되면 <strong>함수가 실행되기 전에</strong> 작성된 <strong>순서대로</strong> 한 데 모아 <code class=\"language-text\">environmentRecord</code>에 저장된다. <strong>호이스팅</strong>(= “끌어올리는 것”)이란 실제 물리적으로 식별자 정보들을 끌어올리는 것이 아니라 <strong>함수 실행 전 식별자 정보들만 먼저 저장하는 과정을 표현한 추상의 개념이라고 보면 된다.</strong></p>\n<p>이때 <strong>변수는 선언부만 호이스팅하는 반면에 함수 선언문은 전체를 호이스팅</strong>하기 때문에 함수 선언문으로 정의한 함수는 선언 전에 호출해도 오류없이 실행이 된다. <strong>이런 점은 혼란을 일으킬 수 있기 때문에 함수 표현식으로 정의하는 것이 좋다.</strong> (함수 표현식으로 정의한 함수는 변수처럼 선언부만 호이스팅 되기 때문)</p>\n<hr>\n<h2 id=\"outerenvironmentreference와-스코프\" style=\"position:relative;\"><a href=\"#outerenvironmentreference%EC%99%80-%EC%8A%A4%EC%BD%94%ED%94%84\" aria-label=\"outerenvironmentreference와 스코프 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>outerEnvironmentReference와 스코프</h2>\n<ul>\n<li><strong>Block</strong><br>\n중괄호 <code class=\"language-text\">{}</code>로 감싸진 범위 (<code class=\"language-text\">for</code>, <code class=\"language-text\">if</code> 등)</li>\n<li><strong>Scope</strong><br>\n식별자에 대한 유효범위<br>\n참조 대상 식별자(변수명, 함수명처럼 어떤 대상을 다른 대상과 구분하여 식별할 수 있는 이름)에 접근할 수 있는 범위</li>\n</ul>\n<p>스코프란 식별자에 대한 유효범위를 말한다. 여기서 식별자란 값이나 표현식에 대한 주소값 (변수명이나 함수명)을 말한다.</p>\n<p>앞서 언급했던 실행 컨텍스트의 <code class=\"language-text\">outerEnvironmentReference</code>는 현재 호출된 함수가 <strong>선언될 당시의</strong> LexicalEnvironment를 <strong>참조</strong>한다. 간단히 말하면 부모의 (조상x, 바로 위 함수) LexicalEnvironment를 가리킨다. 그래서 함수를 실행할 때 필요한 식별자에 대한 정보가 함수 내부, 즉 자신의 <code class=\"language-text\">LexicalEnvironment</code> 안에 저장되어있지 않으면 <code class=\"language-text\">outerEnvironmentReference</code>가 가리키고 있는 (부모 함수의) <code class=\"language-text\">LexicalEnvironment</code>에서 그 정보를 찾는다.</p>\n<p>역시 그 위의 함수는 다시 더 위의 <code class=\"language-text\">LexicalEnvironment</code>를 가리키고 있어서 <code class=\"language-text\">outerEnvironmentReference</code>는 연결 리스트의 형태를 띤다. 이런 형태로 내부에 저장되어 있지 않은 식별자 정보를 찾아 찾아가는 것, 이렇게 연결되어 있는 것을 스코프 체인이라고 한다. 이런 구조 때문에 스코프가 중첩되어 있을 경우 가장 가까운 스코프의 정보를 우선 참조한다.</p>\n<p>자바스크립트는 함수 레벨 스코프를 만들지만 ES6의 let, const 키워드를 통해 블록 레벨 스코프를 만들 수 있다.</p>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<ul>\n<li>스코프란 식별자에 대한 유효범위를 말한다.</li>\n<li>식별자는 자신이 <strong>어디서 선언되었는지</strong>에 의해 유효한 범위를 갖는다.</li>\n<li>하위 스코프는 상위 스코프에 접근할 수 있지만 상위 스코프는 하위 스코프에 접근이 불가하다.</li>\n<li>중첩 스코프는 가장 인접한 지역을 우선 참조한다.</li>\n<li>자바스크립트는 블록 레벨이 아닌 <strong>함수 레벨 스코프</strong>를 따른다. 하지만 ES6 문법의 <code class=\"language-text\">let</code>, <code class=\"language-text\">const</code> 키워드를 쓰면 <strong>블록 레벨 스코프</strong>를 사용할 수 있다.</li>\n</ul>\n<h3 id=\"scope-사용에-주의할-점\" style=\"position:relative;\"><a href=\"#scope-%EC%82%AC%EC%9A%A9%EC%97%90-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90\" aria-label=\"scope 사용에 주의할 점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scope 사용에 주의할 점</h3>\n<ol>\n<li>\n<p>최소한의 전역 변수 사용</p>\n<ul>\n<li>최대한 <code class=\"language-text\">let</code>과 <code class=\"language-text\">const</code> 키워드를 사용하여 전역 변수를 줄이는 것이 좋다.</li>\n<li>전역 변수의 사용을 줄이는 방법으로 전역 변수의 객체를 만들어 사용하는 것이다.</li>\n<li>즉시 실행함수를 사용하면 함수 실행 후 전역 변수는 즉시 삭제된다.</li>\n</ul>\n</li>\n<li>다른 블록, 스코프에 있는 변수끼리도 변수명이 중복되지 않도록 주의한다.</li>\n</ol>\n<p>scope의 오염 예제.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">logSkyColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> dusk <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> myColor <span class=\"token operator\">=</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>dusk<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> myColor <span class=\"token operator\">=</span> <span class=\"token string\">\"pink\"</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// pink</span>\n  <span class=\"token punctuation\">}</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// blue</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 에러!!</span></code></pre></div>","fields":{"slug":"/posts/context","tagSlugs":null},"frontmatter":{"date":"2020-07-27 14:25:00","description":"코어 자바스크립트 2장. 실행 컨텍스트","tags":null,"title":"JS | 실행 컨텍스트: 호이스팅과 스코프","socialImage":null}}},"pageContext":{"slug":"/posts/context"}},"staticQueryHashes":["251939775","401334301","825871152"]}